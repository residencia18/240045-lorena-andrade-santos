<div class="page-container" *ngIf="!isLoading">
  <!-- <div class="header">
      <h2>Listagem de Suínos</h2>
      <div class="button-container">
          <button mat-fab color="primary" aria-label="Adicionar Suíno" matTooltip="Adicionar Suíno"
              (click)="openDialog()">
              <mat-icon>add</mat-icon>
          </button>
      </div>
  </div> -->
  <div class="filters">
      <mat-form-field class="filter-field">
          <mat-label>Filtrar por Brinco</mat-label>
          <input matInput class="small-placeholder" (keyup)="applyFilter($any($event.target).value, 'brinco')"
              placeholder="Brinco">
      </mat-form-field>
      <mat-form-field class="filter-field">
          <mat-label>Filtrar por Brinco do Pai</mat-label>
          <input matInput class="small-placeholder" (keyup)="applyFilter($any($event.target).value, 'brincoPai')"
              placeholder="Brinco do Pai">
      </mat-form-field>

      <mat-form-field class="filter-field">
          <mat-label>Filtrar por Brinco da Mãe</mat-label>
          <input matInput class="small-placeholder" (keyup)="applyFilter($any($event.target).value, 'brincoMae')"
              placeholder="Brinco da Mãe">
      </mat-form-field>

      <mat-form-field class="filter-field">
          <mat-label>Filtrar por Idade</mat-label>
          <input matInput class="small-placeholder" (keyup)="applyFilter($any($event.target).value, 'dataNascimento')"
              placeholder="Idade">
      </mat-form-field>

      <mat-form-field class="filter-field">
          <mat-label>Filtrar por Data de Saída</mat-label>
          <input matInput class="small-placeholder" (keyup)="applyFilter($any($event.target).value, 'dataSaida')"
              placeholder="Data de Saída">
      </mat-form-field>
      <mat-form-field class="filter-field">
          <mat-label>Filtrar por Status</mat-label>
          <mat-select [(ngModel)]="statusFilter" (selectionChange)="applyFilter(statusFilter, 'status')"
              placeholder="Status">
              <mat-option value="Todos">Todos</mat-option>
              <mat-option value="Ativo">Ativo</mat-option>
              <mat-option value="Vendido">Vendido</mat-option>
              <mat-option value="Morto">Morto</mat-option>
          </mat-select>
      </mat-form-field>

      <mat-form-field class="filter-field">
          <mat-label>Filtrar por Sexo</mat-label>
          <mat-select [(ngModel)]="sexFilter" (selectionChange)="applyFilter(sexFilter, 'sexo')" placeholder="Sexo">
              <mat-option value="Todos">Todos</mat-option>
              <mat-option value="Macho">M</mat-option>
              <mat-option value="Fêmea">F</mat-option>
          </mat-select>
      </mat-form-field>
  </div>
  <table mat-table [dataSource]="filteredSuinos" class="mat-elevation-z8">
    <ng-container matColumnDef="brinco">
      <th mat-header-cell *matHeaderCellDef> Brinco</th>
      <td mat-cell *matCellDef="let element"> {{element.brinco}} </td>
    </ng-container>
  
   
    <ng-container matColumnDef="brincoPai">
      <th mat-header-cell *matHeaderCellDef> Brinco Pai </th>
      <td mat-cell *matCellDef="let element"> {{element.brincoPai}} </td>
    </ng-container>
  
    <ng-container matColumnDef="brincoMae">
      <th mat-header-cell *matHeaderCellDef> Brinco Mãe </th>
      <td mat-cell *matCellDef="let element"> {{element.brincoMae}} </td>
    </ng-container>
  
    <ng-container matColumnDef="dataNascimento">
      <th mat-header-cell *matHeaderCellDef> Data de Nascimento </th>
      <td mat-cell *matCellDef="let element"> {{formatarData(element.dataNascimento)}} </td>
    </ng-container>
  
    <ng-container matColumnDef="dataSaida">
      <th mat-header-cell *matHeaderCellDef> Data de Saída </th>
      <td mat-cell *matCellDef="let element"> {{formatarData(element.dataSaida)}} </td>
    </ng-container>
  
    <ng-container matColumnDef="sexo">
      <th mat-header-cell *matHeaderCellDef> Sexo </th>
      <td mat-cell *matCellDef="let element"> {{element.sexo}} </td>
    </ng-container>
  
    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef> Status </th>
      <td mat-cell *matCellDef="let element"> {{element.status}} </td>
    </ng-container>
  
    <ng-container matColumnDef="idade">
      <th mat-header-cell *matHeaderCellDef> Idade </th>
      <td mat-cell *matCellDef="let element"> {{ formatarData(element.dataNascimento) | calcularIdade }} </td>
    </ng-container>
  
     <!-- Coluna de ações -->
     <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef> Ações </th>
      <td mat-cell *matCellDef="let element">
        <button mat-icon-button color="primary" id="btnEditar" routerLink="/editarAnimal/{{element.id}}">
          <mat-icon>edit</mat-icon>
        </button>
        <button mat-icon-button color="warn" id="btnExcluir" (click)="apagarSuino(element.id)">
          <mat-icon>delete</mat-icon>
        </button>
      </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
  <ng-container *ngIf="filteredSuinos.length===0">
      <div class="no-data-found">Nenhum suíno encontrado.</div>
  </ng-container>
</div>
<mat-card-content class="container" *ngIf="isLoading"
  style="display: flex; justify-content: center; align-items: center; height: 100vh;">
  <mat-spinner diameter="50"></mat-spinner>
</mat-card-content>